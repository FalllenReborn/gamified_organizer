{"ast":null,"code":"import React,{useContext,useState}from'react';import axios from'axios';import{ThemeContext}from'../../ThemeContext';import'./loginPopup.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginPopup=_ref=>{let{show,onClose,onOpenRegister}=_ref;const{isDarkMode,selectedLanguage}=useContext(ThemeContext);const[username,setUsername]=useState('');const[password,setPassword]=useState('');const[error,setError]=useState('');const translations={english:{login:'Login',confirm:'Confirm',register:'Register',username:'Username',password:'Password'},polish:{login:'Zaloguj się',confirm:'Potwierdź',register:'Zarejestruj się',username:'Nazwa użytkownika',password:'Hasło'}};const t=translations[selectedLanguage];function getCookie(name){const cookieValue=document.cookie.split('; ').find(row=>row.startsWith(name));console.log('cookieValue:',cookieValue);// Debug\nif(cookieValue){return cookieValue.split('=')[1];}return'';}const handleSubmit=async event=>{event.preventDefault();console.log('CSRF token:',getCookie('csrftoken'));// Debug\ntry{const response=await axios.post('http://127.0.0.1:8000/accounts/login/',{username,password},{headers:{'Content-Type':'application/json','X-CSRFToken':getCookie('csrftoken')},withCredentials:true});console.log('Response status:',response.status);// Debug\nif(response.status===200){// Redirect to dashboard or another page on successful login\nwindow.location.href='/dashboard/';}else{// Display error message if login failed\nsetError('Invalid username or password.');}}catch(error){console.error('Error:',error);setError('Invalid username or password.');}};if(!show){return null;}return/*#__PURE__*/_jsx(\"div\",{className:\"popup-overlay \".concat(isDarkMode?'dark-mode':''),children:/*#__PURE__*/_jsxs(\"div\",{className:\"popup-content \".concat(isDarkMode?'dark-mode':''),children:[/*#__PURE__*/_jsx(\"button\",{className:\"close-icon\",onClick:onClose,children:\"X\"}),/*#__PURE__*/_jsx(\"h2\",{children:t.login}),/*#__PURE__*/_jsxs(\"form\",{className:\"login-form\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"username\",children:t.username}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"username\",name:\"username\",value:username,onChange:e=>setUsername(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:t.password}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:password,onChange:e=>setPassword(e.target.value),required:true})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"register-button\",onClick:onOpenRegister,children:t.register}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"confirm-button\",children:t.confirm})]})]})]})});};export default LoginPopup;","map":{"version":3,"names":["React","useContext","useState","axios","ThemeContext","jsx","_jsx","jsxs","_jsxs","LoginPopup","_ref","show","onClose","onOpenRegister","isDarkMode","selectedLanguage","username","setUsername","password","setPassword","error","setError","translations","english","login","confirm","register","polish","t","getCookie","name","cookieValue","document","cookie","split","find","row","startsWith","console","log","handleSubmit","event","preventDefault","response","post","headers","withCredentials","status","window","location","href","className","concat","children","onClick","onSubmit","htmlFor","type","id","value","onChange","e","target","required"],"sources":["C:/Users/Seweryn/Documents/Projects/taskmaster/frontend/src/components/login/LoginPopup.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { ThemeContext } from '../../ThemeContext';\r\nimport './loginPopup.css';\r\n\r\nconst LoginPopup = ({ show, onClose, onOpenRegister }) => {\r\n  const { isDarkMode, selectedLanguage } = useContext(ThemeContext);\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const translations = {\r\n    english: {\r\n      login: 'Login',\r\n      confirm: 'Confirm',\r\n      register: 'Register',\r\n      username: 'Username',\r\n      password: 'Password'\r\n    },\r\n    polish: {\r\n      login: 'Zaloguj się',\r\n      confirm: 'Potwierdź',\r\n      register: 'Zarejestruj się',\r\n      username: 'Nazwa użytkownika',\r\n      password: 'Hasło'\r\n    }\r\n  };\r\n\r\n  const t = translations[selectedLanguage];\r\n\r\n  function getCookie(name) {\r\n    const cookieValue = document.cookie.split('; ').find(row => row.startsWith(name));\r\n    console.log('cookieValue:', cookieValue);   // Debug\r\n    if (cookieValue) {\r\n        return cookieValue.split('=')[1];\r\n    }\r\n    return '';\r\n  }\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n\r\n    console.log('CSRF token:', getCookie('csrftoken'))   // Debug\r\n\r\n    try {\r\n      const response = await axios.post('http://127.0.0.1:8000/accounts/login/', \r\n        { username, password },\r\n        {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n            'X-CSRFToken': getCookie('csrftoken')\r\n          },\r\n          withCredentials: true\r\n        }\r\n      );\r\n      console.log('Response status:', response.status);   // Debug\r\n\r\n      if (response.status === 200) {\r\n        // Redirect to dashboard or another page on successful login\r\n        window.location.href = '/dashboard/';\r\n      } else {\r\n        // Display error message if login failed\r\n        setError('Invalid username or password.');\r\n      }\r\n    } catch (error) {\r\n      console.error('Error:', error);\r\n      setError('Invalid username or password.');\r\n    }\r\n  };\r\n\r\n  if (!show) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className={`popup-overlay ${isDarkMode ? 'dark-mode' : ''}`}>\r\n      <div className={`popup-content ${isDarkMode ? 'dark-mode' : ''}`}>\r\n        <button className=\"close-icon\" onClick={onClose}>X</button>\r\n        <h2>{t.login}</h2>\r\n        <form className=\"login-form\" onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"username\">{t.username}</label>\r\n            <input type=\"text\" id=\"username\" name=\"username\" value={username} onChange={(e) => setUsername(e.target.value)} required />\r\n          </div>\r\n          <div className=\"form-group\">\r\n            <label htmlFor=\"password\">{t.password}</label>\r\n            <input type=\"password\" id=\"password\" name=\"password\" value={password} onChange={(e) => setPassword(e.target.value)} required />\r\n          </div>\r\n          {error && <div className=\"error-message\">{error}</div>}\r\n          <div className=\"form-actions\">\r\n            <button type=\"button\" className=\"register-button\" onClick={onOpenRegister}>{t.register}</button>\r\n            <button type=\"submit\" className=\"confirm-button\">{t.confirm}</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPopup;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}